<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FILM GAZE SNAKE ‚Äî Mulvey Theory Game</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'SF Mono', 'Courier New', monospace;
            background: #000;
            color: #00ff41;
            overflow: hidden;
            user-select: none;
        }
        #app {
            display: flex;
            height: 100vh;
            width: 100vw;
        }
        #game-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        #sidebar {
            width: 350px;
            background: #0a0a0a;
            border-left: 2px solid #0bc;
            overflow-y: auto;
            padding: 20px;
        }
        #ui-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
        }
        .stat { font-size: 16px; margin-bottom: 8px; color: #0bc; }
        #controls {
            position: absolute;
            bottom: 20px;
            display: flex;
            gap: 15px;
            z-index: 10;
        }
        .btn {
            background: transparent;
            border: 2px solid #0bc;
            color: #0bc;
            padding: 12px 24px;
            font-family: inherit;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 14px;
            transition: all 0.2s;
        }
        .btn:hover {
            background: #0bc;
            color: #000;
        }
        #game-container {
            position: relative;
            width: 85vmin;
            height: 85vmin;
            max-width: 700px;
            max-height: 700px;
        }
        #game-canvas {
            width: 100%;
            height: 100%;
            border: 3px solid #0bc;
            display: block;
            background: #000;
        }
        #video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        #video-overlay iframe {
            position: absolute;
            opacity: 0.6;
            mix-blend-mode: screen;
            border: none;
            pointer-events: none;
        }
        #gameover-screen, #pause-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 30px;
        }
        #gameover-screen.active, #pause-screen.active {
            display: flex;
        }
        .screen-title {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff4d6d;
        }
        .score-display {
            font-size: 24px;
            margin-bottom: 30px;
            color: #0bc;
        }
        .collected-item {
            padding: 10px;
            margin: 8px 0;
            border-left: 3px solid #0bc;
            background: #111;
        }
        .item-title { 
            color: #fff; 
            font-weight: bold; 
            margin-bottom: 4px;
        }
        .item-desc { 
            color: #999; 
            font-size: 12px;
        }
        h2 {
            color: #0bc;
            font-size: 18px;
            margin-bottom: 15px;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #0bc; }
    </style>
</head>
<body>
    <div id="app">
        <div id="game-section">
            <div id="ui-overlay">
                <div class="stat">SCORE: <span id="score">0</span></div>
                <div class="stat">GAZE LEVEL: <span id="level">1</span></div>
                <div class="stat">CONCEPTS: <span id="collectCount">0</span>/<span id="totalCount">0</span></div>
            </div>

            <div id="game-container">
                <canvas id="game-canvas"></canvas>
                <div id="video-overlay"></div>

                <div id="gameover-screen">
                    <div class="screen-title">GAZE TERMINATED</div>
                    <div class="score-display">Final Score: <span id="final-score">0</span></div>
                    <button class="btn" onclick="restartGame()">RESTART</button>
                </div>

                <div id="pause-screen">
                    <div class="screen-title">PAUSED</div>
                    <button class="btn" onclick="togglePause()">RESUME</button>
                </div>
            </div>

            <div id="controls">
                <button class="btn" onclick="togglePause()">PAUSE</button>
                <button class="btn" onclick="restartGame()">RESTART</button>
            </div>
        </div>

        <div id="sidebar">
            <h2>COLLECTED CONCEPTS</h2>
            <div id="collected-list"></div>
        </div>
    </div>

    <script>
        // Film Gaze Concepts from Mulvey Codex
        const FILM_CONCEPTS = [
            {
                id: 'br2049-opening',
                title: 'Blade Runner 2049: K\'s Opening',
                desc: 'K\'s active male gaze establishing control',
                icon: 'üëÅ',
                color: '#ff4d6d',
                youtube: 'hR8f5vFvX7k',
                term: '<active male gaze>'
            },
            {
                id: 'br2049-joi',
                title: 'Blade Runner 2049: Joi & Mariette',
                desc: 'Fetishistic scopophilia through AI',
                icon: 'üîÆ',
                color: '#f0f',
                term: '<fetishistic scopophilia>'
            },
            {
                id: 'ex-machina-arrival',
                title: 'Ex Machina: Caleb\'s Arrival',
                desc: 'Scopophilia as investigation',
                icon: 'üîç',
                color: '#68fbd1',
                term: '<scopophilia>'
            },
            {
                id: 'ex-machina-ava',
                title: 'Ex Machina: Ava\'s Glass Reveals',
                desc: 'Voyeurism as investigation through glass',
                icon: 'ü™ü',
                color: '#ff8cc9',
                youtube: 'D_I-w-lYI84',
                term: '<voyeurism as investigation>'
            },
            {
                id: 'her-opening',
                title: 'Her: Theodore\'s Opening',
                desc: 'Loneliness and algorithm for desire',
                icon: 'üí¨',
                color: '#ffd166',
                term: '<algorithm for desire>'
            },
            {
                id: 'her-proxy',
                title: 'Her: Physical Proxy Scene',
                desc: 'Limits of desire without physical form',
                icon: 'üë§',
                color: '#9aa4b2',
                term: '<castration anxiety>'
            },
            {
                id: 'alita-found',
                title: 'Alita: Ido Finds Alita',
                desc: 'Found object and male creator gaze',
                icon: 'üîß',
                color: '#00bfff',
                term: '<male creator gaze>'
            },
            {
                id: 'alita-warrior',
                title: 'Alita: Hunter-Warrior Scene',
                desc: 'Counter-gaze of female agency',
                icon: '‚öîÔ∏è',
                color: '#2ce3ff',
                term: '<counter-gaze>'
            },
            {
                id: 'barbie-opening',
                title: 'Barbie: Opening Parody',
                desc: 'Matriarchal world free from male gaze',
                icon: 'üéÄ',
                color: '#ff69b4',
                term: '<female subjectivity>'
            },
            {
                id: 'barbie-real-world',
                title: 'Barbie: Real World Gaze',
                desc: 'Oppressive male gaze made visible',
                icon: 'üëÄ',
                color: '#ff4d6d',
                youtube: 'lJbW49H29-M',
                term: '<oppressive male gaze>'
            },
            {
                id: 'ai-joe',
                title: 'A.I.: Gigolo Joe',
                desc: 'Technologically perfected fetish object',
                icon: 'ü§ñ',
                color: '#f0f',
                term: '<fetish object>'
            },
            {
                id: 'ai-dr-know',
                title: 'A.I.: Dr. Know Scene',
                desc: 'Algorithmic authority controlling information',
                icon: 'üé≤',
                color: '#ffd166',
                term: '<neuro-cinematic-control>'
            }
        ];

        // Game State
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const videoOverlay = document.getElementById('video-overlay');
        
        const GRID_SIZE = 20;
        let canvasSize = 600;
        let gridCount = canvasSize / GRID_SIZE;
        
        let snake, direction, nextDirection, food, score, gameLoop, isPaused, collected, currentVideo;
        
        function initGame() {
            canvas.width = canvasSize;
            canvas.height = canvasSize;
            
            snake = [{x: 10, y: 10}];
            direction = {x: 1, y: 0};
            nextDirection = {x: 1, y: 0};
            food = null;
            score = 0;
            collected = [];
            isPaused = false;
            currentVideo = null;
            
            spawnFood();
            updateUI();
            document.getElementById('totalCount').textContent = FILM_CONCEPTS.length;
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, 150);
        }
        
        function spawnFood() {
            const uncollected = FILM_CONCEPTS.filter(c => !collected.find(col => col.id === c.id));
            if (uncollected.length === 0) {
                // Game won!
                endGame();
                return;
            }
            
            const concept = uncollected[Math.floor(Math.random() * uncollected.length)];
            food = {
                x: Math.floor(Math.random() * gridCount),
                y: Math.floor(Math.random() * gridCount),
                concept: concept
            };
        }
        
        function update() {
            if (isPaused) return;
            
            direction = nextDirection;
            
            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
            
            // Wall collision
            if (head.x < 0 || head.x >= gridCount || head.y < 0 || head.y >= gridCount) {
                endGame();
                return;
            }
            
            // Self collision
            if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                endGame();
                return;
            }
            
            snake.unshift(head);
            
            // Food collision
            if (head.x === food.x && head.y === food.y) {
                score += 100;
                collected.push(food.concept);
                updateCollected();
                
                // Play video if available
                if (food.concept.youtube) {
                    playVideo(food.concept.youtube);
                }
                
                spawnFood();
            } else {
                snake.pop();
            }
            
            draw();
            updateUI();
        }
        
        function draw() {
            // Clear
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvasSize, canvasSize);
            
            // Grid
            ctx.strokeStyle = '#111';
            ctx.lineWidth = 1;
            for (let i = 0; i <= gridCount; i++) {
                ctx.beginPath();
                ctx.moveTo(i * GRID_SIZE, 0);
                ctx.lineTo(i * GRID_SIZE, canvasSize);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, i * GRID_SIZE);
                ctx.lineTo(canvasSize, i * GRID_SIZE);
                ctx.stroke();
            }
            
            // Snake
            snake.forEach((segment, i) => {
                const gradient = ctx.createRadialGradient(
                    segment.x * GRID_SIZE + GRID_SIZE/2,
                    segment.y * GRID_SIZE + GRID_SIZE/2,
                    0,
                    segment.x * GRID_SIZE + GRID_SIZE/2,
                    segment.y * GRID_SIZE + GRID_SIZE/2,
                    GRID_SIZE/2
                );
                gradient.addColorStop(0, i === 0 ? '#0bc' : '#068');
                gradient.addColorStop(1, '#000');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(segment.x * GRID_SIZE + 1, segment.y * GRID_SIZE + 1, GRID_SIZE - 2, GRID_SIZE - 2);
            });
            
            // Food
            if (food) {
                ctx.fillStyle = food.concept.color;
                ctx.fillRect(food.x * GRID_SIZE + 2, food.y * GRID_SIZE + 2, GRID_SIZE - 4, GRID_SIZE - 4);
                
                // Icon
                ctx.fillStyle = '#fff';
                ctx.font = '16px monospace';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(food.concept.icon, food.x * GRID_SIZE + GRID_SIZE/2, food.y * GRID_SIZE + GRID_SIZE/2);
            }
        }
        
        function playVideo(youtubeId) {
            if (currentVideo) {
                currentVideo.remove();
            }
            
            const iframe = document.createElement('iframe');
            iframe.src = `https://www.youtube.com/embed/${youtubeId}?autoplay=1&mute=1&start=0&end=30`;
            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.top = '0';
            iframe.style.left = '0';
            
            videoOverlay.appendChild(iframe);
            currentVideo = iframe;
            
            setTimeout(() => {
                if (iframe.parentNode) {
                    iframe.remove();
                }
            }, 8000);
        }
        
        function updateCollected() {
            const list = document.getElementById('collected-list');
            list.innerHTML = collected.map(c => `
                <div class="collected-item">
                    <div class="item-title">${c.icon} ${c.title}</div>
                    <div class="item-desc">${c.desc}</div>
                    <div class="item-desc" style="color:#0bc;margin-top:4px;">${c.term}</div>
                </div>
            `).join('');
        }
        
        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = Math.floor(collected.length / 3) + 1;
            document.getElementById('collectCount').textContent = collected.length;
        }
        
        function endGame() {
            clearInterval(gameLoop);
            document.getElementById('final-score').textContent = score;
            document.getElementById('gameover-screen').classList.add('active');
        }
        
        function togglePause() {
            isPaused = !isPaused;
            document.getElementById('pause-screen').classList.toggle('active', isPaused);
        }
        
        function restartGame() {
            document.getElementById('gameover-screen').classList.remove('active');
            document.getElementById('pause-screen').classList.remove('active');
            if (currentVideo) currentVideo.remove();
            videoOverlay.innerHTML = '';
            initGame();
        }
        
        // Controls
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp': case 'w': case 'W':
                    if (direction.y === 0) nextDirection = {x: 0, y: -1};
                    break;
                case 'ArrowDown': case 's': case 'S':
                    if (direction.y === 0) nextDirection = {x: 0, y: 1};
                    break;
                case 'ArrowLeft': case 'a': case 'A':
                    if (direction.x === 0) nextDirection = {x: -1, y: 0};
                    break;
                case 'ArrowRight': case 'd': case 'D':
                    if (direction.x === 0) nextDirection = {x: 1, y: 0};
                    break;
                case ' ': case 'p': case 'P':
                    togglePause();
                    break;
            }
        });
        
        // Start
        initGame();
    </script>
</body>
</html>
