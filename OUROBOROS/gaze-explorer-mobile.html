<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GAZE EXPLORER — Mobile</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'SF Mono', 'Monaco', monospace;
            background: #000;
            color: #ccc;
            overflow: hidden;
            user-select: none;
            touch-action: none;
        }
        
        #app {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        #game-container {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }
        
        #game-canvas {
            max-width: 100%;
            max-height: 100%;
            border: 2px solid #0bc;
            background: #000;
            touch-action: none;
        }
        
        #video-overlay {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            height: 200px;
            background: rgba(0,0,0,0.95);
            border: 2px solid #0bc;
            display: none;
            z-index: 5;
        }
        
        #video-overlay.active {
            display: block;
        }
        
        #video-overlay iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        #stats {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.9);
            padding: 10px;
            border: 1px solid #0bc;
            font-size: 12px;
            z-index: 10;
        }
        
        .stat {
            color: #0bc;
            margin-bottom: 4px;
        }
        
        #toggle-panel-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.9);
            border: 2px solid #0bc;
            color: #0bc;
            padding: 10px;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #side-panel {
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 350px;
            height: 100%;
            background: #000;
            border-left: 3px solid #0bc;
            transition: right 0.3s ease;
            z-index: 20;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        #side-panel.open {
            right: 0;
        }
        
        #panel-header {
            padding: 15px;
            background: #0a0a0a;
            border-bottom: 2px solid #0bc;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #panel-title {
            color: #0bc;
            font-size: 14px;
            text-transform: uppercase;
        }
        
        #close-panel {
            background: none;
            border: none;
            color: #0bc;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
        }
        
        #current-video-info {
            padding: 15px;
            background: #0a0a0a;
            border-bottom: 2px solid #333;
            display: none;
        }
        
        #current-video-info.active {
            display: block;
        }
        
        .video-title {
            color: #0bc;
            font-size: 14px;
            margin-bottom: 6px;
            font-weight: bold;
        }
        
        .video-desc {
            color: #999;
            font-size: 12px;
            line-height: 1.4;
            margin-bottom: 6px;
        }
        
        .video-term {
            color: #fff;
            font-size: 11px;
            padding: 3px 6px;
            background: #1a1a1a;
            border-left: 3px solid #0bc;
            display: inline-block;
        }
        
        #collection-list {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .collection-item {
            padding: 10px;
            margin-bottom: 8px;
            background: #111;
            border-left: 3px solid #0bc;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .collection-item.active {
            background: #1a1a1a;
            box-shadow: 0 0 10px rgba(0,188,212,0.3);
        }
        
        .item-label {
            font-size: 10px;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 2px;
        }
        
        .item-title {
            color: #fff;
            font-size: 13px;
            margin-bottom: 2px;
        }
        
        .item-term {
            color: #0bc;
            font-size: 11px;
        }
        
        #pause-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            padding: 30px;
            border: 3px solid #0bc;
            display: none;
            z-index: 100;
        }
        
        #pause-overlay.active {
            display: block;
        }
        
        .pause-title {
            color: #0bc;
            font-size: 20px;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .btn {
            background: #000;
            border: 2px solid #0bc;
            color: #0bc;
            padding: 12px 20px;
            font-family: inherit;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 14px;
            width: 100%;
        }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #0bc; border-radius: 3px; }
        
        @media (min-width: 768px) {
            #side-panel {
                max-width: 400px;
            }
            #stats {
                font-size: 14px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div id="game-container">
            <canvas id="game-canvas"></canvas>
            
            <div id="video-overlay">
                <div id="video-placeholder" style="display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:12px;">
                    Video plays here when collected
                </div>
            </div>
            
            <div id="stats">
                <div class="stat">COLLECTED: <span id="collectCount">0</span>/12</div>
                <div class="stat" id="currentExploring" style="font-size:11px;color:#999;max-width:150px;">Navigate to collect</div>
            </div>
            
            <button id="toggle-panel-btn" onclick="togglePanel()">☰</button>
            
            <div id="pause-overlay">
                <div class="pause-title">PAUSED</div>
                <button class="btn" onclick="togglePause()">RESUME</button>
            </div>
        </div>
        
        <div id="side-panel">
            <div id="panel-header">
                <div id="panel-title">Collected Scenes</div>
                <button id="close-panel" onclick="togglePanel()">×</button>
            </div>
            
            <div id="current-video-info">
                <div class="video-title" id="videoTitle"></div>
                <div class="video-desc" id="videoDesc"></div>
                <div class="video-term" id="videoTerm"></div>
            </div>
            
            <div id="collection-list">
                <div style="color:#666;font-size:12px;margin-bottom:10px;">
                    Swipe to navigate • Collect scenes to watch
                </div>
                <div id="collectionItems"></div>
            </div>
        </div>
    </div>

    <script>
        // Film scenes data
        const SCENES = [
            { id: 'br2049', title: 'Blade Runner 2049: Opening', film: 'Blade Runner 2049', desc: 'K establishes active male gaze', term: 'active male gaze', youtube: 'hR8f5vFvX7k', color: '#ff4d6d' },
            { id: 'br2049-joi', title: 'Blade Runner 2049: Joi Scene', film: 'Blade Runner 2049', desc: 'Holographic AI as fetish object', term: 'fetishistic scopophilia', youtube: 'pzD-QaLQPHs', color: '#f0f' },
            { id: 'ex-machina', title: 'Ex Machina: Glass Sessions', film: 'Ex Machina', desc: 'Voyeurism through transparent wall', term: 'voyeurism', youtube: 'D_I-w-lYI84', color: '#ff8cc9' },
            { id: 'her', title: 'Her: Theodore Alone', film: 'Her', desc: 'Loneliness creates desire algorithm', term: 'algorithm for desire', youtube: 'dJTU48_yghs', color: '#ffd166' },
            { id: 'her-proxy', title: 'Her: Physical Proxy', film: 'Her', desc: 'Failed materialization reveals limits', term: 'castration anxiety', youtube: 'Cx4SZ7dTjFA', color: '#9aa4b2' },
            { id: 'alita-found', title: 'Alita: Discovery', film: 'Alita Battle Angel', desc: 'Male creator gives purpose', term: 'paternal gaze', youtube: 'x5b_7ITdB3E', color: '#00bfff' },
            { id: 'alita-warrior', title: 'Alita: Combat', film: 'Alita Battle Angel', desc: 'Counter-gaze of female agency', term: 'counter-gaze', youtube: 'lCDPWeW2fxs', color: '#2ce3ff' },
            { id: 'barbie-open', title: 'Barbie: Barbieland', film: 'Barbie', desc: 'World free from male gaze', term: 'female subjectivity', youtube: 'pBk4NYhWNMM', color: '#ff69b4' },
            { id: 'barbie-real', title: 'Barbie: Real World', film: 'Barbie', desc: 'Oppressive male gaze made visible', term: 'oppressive gaze', youtube: 'lJbW49H29-M', color: '#ff4d6d' },
            { id: 'ai-joe', title: 'A.I.: Gigolo Joe', film: 'A.I.', desc: 'Male love mecha as fetish', term: 'fetish object', youtube: 'y8SwSRN70DQ', color: '#f0f' },
            { id: 'ai-know', title: 'A.I.: Dr. Know', film: 'A.I.', desc: 'Algorithmic oracle controls info', term: 'neuro-control', youtube: 'wvXBY_NPZDU', color: '#ffd166' },
            { id: 'ex-arrival', title: 'Ex Machina: Arrival', film: 'Ex Machina', desc: 'Primed for scopophilic investigation', term: 'scopophilia', youtube: 'bggMQ8RsK1c', color: '#68fbd1' }
        ];

        // Game setup
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const SIZE = 25;
        let GRID = 16;
        
        // Responsive canvas
        function resizeCanvas() {
            const maxSize = Math.min(window.innerWidth - 20, window.innerHeight - 20);
            const gridSize = Math.floor(maxSize / SIZE);
            GRID = gridSize;
            canvas.width = gridSize * SIZE;
            canvas.height = gridSize * SIZE;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        let snake, dir, nextDir, food, collected, paused, speed, gameLoop, currentScene;
        
        function init() {
            snake = [{x: Math.floor(GRID/2), y: Math.floor(GRID/2)}];
            dir = {x: 1, y: 0};
            nextDir = {x: 1, y: 0};
            collected = [];
            paused = false;
            speed = 200;
            currentScene = null;
            
            spawnFood();
            updateUI();
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, speed);
        }
        
        function spawnFood() {
            const available = SCENES.filter(s => !collected.find(c => c.id === s.id));
            if (available.length === 0) return;
            
            food = {
                x: Math.floor(Math.random() * GRID),
                y: Math.floor(Math.random() * GRID),
                scene: available[Math.floor(Math.random() * available.length)]
            };
            
            document.getElementById('currentExploring').textContent = food.scene.title;
        }
        
        function update() {
            if (paused) return;
            
            dir = nextDir;
            const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
            
            // Wrap walls
            if (head.x < 0) head.x = GRID - 1;
            if (head.x >= GRID) head.x = 0;
            if (head.y < 0) head.y = GRID - 1;
            if (head.y >= GRID) head.y = 0;
            
            // Self collision - just pause
            if (snake.some(s => s.x === head.x && s.y === head.y)) return;
            
            snake.unshift(head);
            
            // Food
            if (head.x === food.x && head.y === food.y) {
                collected.push(food.scene);
                playScene(food.scene);
                updateCollectionList();
                spawnFood();
            } else {
                snake.pop();
            }
            
            draw();
            updateUI();
        }
        
        function draw() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Snake
            snake.forEach((seg, i) => {
                const alpha = i === 0 ? 1 : 1 - (i / snake.length) * 0.6;
                ctx.fillStyle = `rgba(0, 188, 212, ${alpha})`;
                ctx.fillRect(seg.x * SIZE + 2, seg.y * SIZE + 2, SIZE - 4, SIZE - 4);
                
                if (i === 0) {
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(seg.x * SIZE + 2, seg.y * SIZE + 2, SIZE - 4, SIZE - 4);
                }
            });
            
            // Food
            if (food) {
                ctx.fillStyle = food.scene.color;
                ctx.fillRect(food.x * SIZE, food.y * SIZE, SIZE, SIZE);
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.strokeRect(food.x * SIZE + 2, food.y * SIZE + 2, SIZE - 4, SIZE - 4);
                
                ctx.fillStyle = '#000';
                ctx.font = `${Math.floor(SIZE * 0.6)}px monospace`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(collected.length + 1, food.x * SIZE + SIZE/2, food.y * SIZE + SIZE/2);
            }
        }
        
        function playScene(scene) {
            currentScene = scene;
            const videoOverlay = document.getElementById('video-overlay');
            videoOverlay.classList.add('active');
            videoOverlay.innerHTML = `<iframe src="https://www.youtube.com/embed/${scene.youtube}?autoplay=1&start=0" allow="autoplay" allowfullscreen></iframe>`;
            
            document.getElementById('current-video-info').classList.add('active');
            document.getElementById('videoTitle').textContent = scene.title;
            document.getElementById('videoDesc').textContent = scene.desc;
            document.getElementById('videoTerm').textContent = scene.term;
            
            setTimeout(() => {
                videoOverlay.classList.remove('active');
                videoOverlay.innerHTML = '<div id="video-placeholder" style="display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:12px;">Video plays here when collected</div>';
            }, 30000);
        }
        
        function updateCollectionList() {
            const list = document.getElementById('collectionItems');
            list.innerHTML = collected.map((scene, i) => `
                <div class="collection-item ${currentScene && currentScene.id === scene.id ? 'active' : ''}" 
                     onclick="playScene(SCENES.find(s => s.id === '${scene.id}'))">
                    <div class="item-label">${i + 1}. ${scene.film}</div>
                    <div class="item-title">${scene.title}</div>
                    <div class="item-term">${scene.term}</div>
                </div>
            `).join('');
        }
        
        function updateUI() {
            document.getElementById('collectCount').textContent = collected.length;
        }
        
        function togglePause() {
            paused = !paused;
            document.getElementById('pause-overlay').classList.toggle('active', paused);
        }
        
        function togglePanel() {
            document.getElementById('side-panel').classList.toggle('open');
        }
        
        // Touch controls
        let touchStartX = 0, touchStartY = 0;
        
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, { passive: false });
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });
        
        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            const dx = touchEndX - touchStartX;
            const dy = touchEndY - touchStartY;
            
            if (Math.abs(dx) > Math.abs(dy)) {
                if (dx > 30 && dir.x === 0) nextDir = {x: 1, y: 0};
                if (dx < -30 && dir.x === 0) nextDir = {x: -1, y: 0};
            } else {
                if (dy > 30 && dir.y === 0) nextDir = {x: 0, y: 1};
                if (dy < -30 && dir.y === 0) nextDir = {x: 0, y: -1};
            }
        }, { passive: false });
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp': case 'w': case 'W':
                    if (dir.y === 0) nextDir = {x: 0, y: -1};
                    break;
                case 'ArrowDown': case 's': case 'S':
                    if (dir.y === 0) nextDir = {x: 0, y: 1};
                    break;
                case 'ArrowLeft': case 'a': case 'A':
                    if (dir.x === 0) nextDir = {x: -1, y: 0};
                    break;
                case 'ArrowRight': case 'd': case 'D':
                    if (dir.x === 0) nextDir = {x: 1, y: 0};
                    break;
                case ' ':
                    togglePause();
                    break;
            }
        });
        
        init();
    </script>
</body>
</html>
