<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Timeline Snake</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Courier New',monospace;background:#0a0a0a;color:#00ff41;overflow:hidden;-webkit-user-select:none;user-select:none}#app{display:flex;height:100vh;width:100vw}#game-section{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}#timeline-section{width:320px;background:#000;border-left:2px solid #00ff41;overflow-y:auto}#ui-overlay{position:absolute;top:10px;left:10px;z-index:10;text-transform:uppercase;font-size:14px}#controls{position:absolute;bottom:20px;display:flex;gap:10px;z-index:10}.btn{background:transparent;border:2px solid #00ff41;color:#00ff41;padding:10px 20px;font-family:inherit;cursor:pointer;text-transform:uppercase}.btn:hover{background:#00ff41;color:#0a0a0a}#game-container{position:relative;width:90vmin;height:90vmin;max-width:600px;max-height:600px}#game-canvas{width:100%;height:100%;border:2px solid #00ff41;display:block}#video-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:5}#video-overlay iframe{position:absolute;opacity:0.7;mix-blend-mode:screen;border:none;pointer-events:none}#gameover-screen,#pause-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(10,10,10,0.95);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:100;padding:20px}#gameover-screen.active,#pause-screen.active{display:flex}.screen-title{font-size:32px;margin-bottom:20px}.score-display{font-size:20px;margin-bottom:30px}#beat-list{max-width:500px;max-height:200px;overflow-y:auto;margin:20px 0;padding:10px;border:1px solid #00ff41}.beat-item{padding:5px;border-bottom:1px solid #333}#export-title-input{background:#000;border:2px solid #00ff41;color:#00ff41;font-family:inherit;padding:10px;width:100%;max-width:400px;margin-bottom:10px}.timeline-header{padding:15px;border-bottom:2px solid #00ff41;font-size:18px;text-transform:uppercase;text-align:center}.fragment-card{padding:15px;border-bottom:1px solid #333;cursor:pointer}.fragment-card:hover{background:rgba(0,255,65,0.1)}.fragment-icon{font-size:24px;color:#ff1493;margin-bottom:5px}.fragment-title{font-size:14px;font-weight:bold;margin-bottom:5px}.fragment-meta{font-size:11px;color:#888;margin-bottom:3px}.fragment-time{font-size:11px;color:#ffff00}#preview-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.98);display:none;flex-direction:column;z-index:1000}#preview-modal.active{display:flex}.modal-header{padding:15px;border-bottom:2px solid #00ff41;display:flex;justify-content:space-between}.modal-close{background:transparent;border:2px solid #ff1493;color:#ff1493;padding:5px 15px;font-family:inherit;cursor:pointer}#modal-video-container{flex:1;display:flex;align-items:center;justify-content:center;padding:20px}#modal-video-container iframe{width:100%;max-width:800px;height:450px;border:2px solid #00ff41}.modal-info{padding:20px;border-top:2px solid #00ff41;max-height:150px;overflow-y:auto}#start-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(10,10,10,0.95);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:200}#start-overlay.hidden{display:none}.start-title{font-size:28px;margin-bottom:20px}.start-instructions{font-size:14px;max-width:400px;margin-bottom:30px;line-height:1.6;text-align:center}@media(max-width:768px){#app{flex-direction:column}#timeline-section{width:100%;height:200px;border-left:none;border-top:2px solid #00ff41}#game-container{width:95vmin;height:95vmin}#controls{bottom:220px}#modal-video-container iframe{height:250px}}</style></head><body><div id="app"><div id="game-section"><div id="ui-overlay"><div>SCORE: <span id="score-value">0</span></div><div>FRAGMENTS: <span id="fragment-count">0</span>/20</div><div>SPEED: <span id="speed-value">200</span>ms</div></div><div id="game-container"><canvas id="game-canvas" width="600" height="600"></canvas><div id="video-overlay"></div><div id="start-overlay"><div class="start-title">TIMELINE SNAKE</div><div class="start-instructions">Collect documentary fragments to weave them into your snake's body as living video timelines. Use arrow keys or swipe to move.</div><button class="btn" id="start-btn">START GAME</button></div><div id="pause-screen"><div class="screen-title">PAUSED</div><button class="btn" onclick="togglePause()">RESUME</button></div><div id="gameover-screen"><div class="screen-title">GAME OVER</div><div class="score-display">FRAGMENTS COLLECTED: <span id="final-score">0</span></div><div id="beat-list"></div><div><input type="text" id="export-title-input" placeholder="Enter timeline title (optional)"><br><button class="btn" onclick="exportTimeline()">EXPORT TIMELINE</button></div><button class="btn" onclick="restart()">RESTART</button></div></div><div id="controls"><button class="btn" onclick="togglePause()">PAUSE</button><button class="btn" onclick="restart()">RESTART</button></div></div><div id="timeline-section"><div class="timeline-header">COLLECTED FRAGMENTS</div><div id="fragment-list"></div></div></div><div id="preview-modal"><div class="modal-header"><div id="modal-title">Fragment Preview</div><button class="modal-close" onclick="closePreview()">✕ CLOSE</button></div><div id="modal-video-container"></div><div class="modal-info" id="modal-info"></div></div><script>
var CONFIG={clips:[{id:"fom-exhibition-1950s",start:27,end:53,icon:"◯",tag:"Media_Apparatus",beat:"opening image",title:"Family of Man Exhibition 1950s",description:"Opening image establishing media apparatus"},{id:"bayer-individual-self",start:67,end:78,icon:"◐",tag:"Core_Concept",beat:"theme stated",title:"Bayer on Individual Self",description:"Core concept establishing personal identity"},{id:"afeni-fairyland-conceal",start:197,end:204,icon:"◑",tag:"Systemic_Critique",beat:"setup",title:"Afeni Fairyland Concealment",description:"Systemic critique setup"},{id:"tupac-grand-stories",start:143,end:148,icon:"◒",tag:"Core_Concept",beat:"catalyst",title:"Tupac Grand Stories",description:"Narrative catalyst moment"},{id:"society-boom-q",start:230,end:237,icon:"◓",tag:"Systemic_Control",beat:"debate",title:"Society Boom Question",description:"Systemic control debate"},{id:"crack-epidemic-afeni-fall",start:291,end:300,icon:"◔",tag:"Systemic_Event",beat:"break into two",title:"Crack Epidemic Afeni Fall",description:"Major systemic event turning point"},{id:"mass-incarceration-clinton",start:1070,end:1078,icon:"◕",tag:"Systemic_Control",beat:"midpoint",title:"Mass Incarceration Clinton Era",description:"Systemic control midpoint"},{id:"saudi-dream-corrupt",start:379,end:384,icon:"◖",tag:"Systemic_Critique",beat:"b story",title:"Saudi Dream Corruption",description:"B-story systemic critique"},{id:"zubaydah-diary-fragments",start:1166,end:1172,icon:"◗",tag:"Personal_Apparatus",beat:"fun and games",title:"Zubaydah Diary Fragments",description:"Personal apparatus exploration"},{id:"jihad-disintegration-factions",start:1237,end:1248,icon:"◘",tag:"Systemic_Event",beat:"bad guys close in",title:"Jihad Disintegration Factions",description:"Systemic event escalation"},{id:"zubaydah-perpetual-now",start:1313,end:1320,icon:"◙",tag:"Emotional_State",beat:"all is lost",title:"Zubaydah Perpetual Now",description:"Emotional nadir"},{id:"cia-enhanced-interrogation",start:2604,end:2616,icon:"◚",tag:"Systemic_Control",beat:"dark night",title:"CIA Enhanced Interrogation",description:"Systemic control dark revelation"},{id:"cia-godzilla-fear",start:2664,end:2675,icon:"◛",tag:"Systemic_Impact",beat:"break into three",title:"CIA Godzilla Fear",description:"Systemic impact breaking point"},{id:"chaos-theory-unpredictable",start:664,end:669,icon:"◜",tag:"Scientific_Theory",beat:"finale",title:"Chaos Theory Unpredictable",description:"Scientific framework finale"},{id:"complexity-theory-patterns",start:738,end:751,icon:"◝",tag:"Scientific_Theory",beat:"final image",title:"Complexity Theory Patterns",description:"Scientific framework final image"},{id:"hinton-neural-networks",start:3595,end:3606,icon:"◞",tag:"Technological_Apparatus",beat:"resolution",title:"Hinton Neural Networks",description:"Technological apparatus resolution"},{id:"algorithms-predict-behavior",start:3650,end:3670,icon:"◟",tag:"Technological_Apparatus",beat:"epilogue",title:"Algorithms Predict Behavior",description:"Technological apparatus epilogue"},{id:"surveillance-capitalism",start:3700,end:3720,icon:"◠",tag:"Systemic_Control",beat:"mirror",title:"Surveillance Capitalism",description:"Systemic control mirror"},{id:"filter-bubble-isolation",start:3750,end:3770,icon:"◡",tag:"Media_Apparatus",beat:"reentry",title:"Filter Bubble Isolation",description:"Media apparatus reentry"},{id:"attention-economy",start:3800,end:3820,icon:"◢",tag:"Systemic_Control",beat:"coda",title:"Attention Economy",description:"Systemic control coda"}],grid:{tileCount:20,baseSpeed:200,speedIncrement:10,speedIncrementInterval:3,minSpeed:50},audio:{frequencies:{turn:450,collect:800,death:200},duration:0.1,haptic:{turn:[10],collect:[20,10,20],death:[100,50,100,50,100]}},youtube:{videoId:"BQ2n6SN7gOY",embedParams:"autoplay=1&mute=1&loop=1&playsinline=1&controls=1&modestbranding=1&iv_load_policy=3"},palette:{primary:"#00ff41",secondary:"#ff1493",bg:"#0a0a0a",food:"#ff0000",accent:"#ffff00"}};var canvas=document.getElementById('game-canvas');var ctx=canvas.getContext('2d');var videoOverlay=document.getElementById('video-overlay');var fragmentList=document.getElementById('fragment-list');var tileCount=CONFIG.grid.tileCount;var tileSize=canvas.width/tileCount;var snake=[];var direction='RIGHT';var nextDirection='RIGHT';var food=null;var gameLoop=null;var gameSpeed=CONFIG.grid.baseSpeed;var collectedFragments=[];var remainingClips=[];var currentFood=null;var audioContext=null;var audioUnlocked=false;var isPaused=false;var isGameOver=false;var touchStartX=0;var touchStartY=0;function unlockAudio(){if(audioUnlocked)return;try{audioContext=new(window.AudioContext||window.webkitAudioContext)();var buffer=audioContext.createBuffer(1,1,22050);var source=audioContext.createBufferSource();source.buffer=buffer;source.connect(audioContext.destination);source.start(0);audioUnlocked=true}catch(e){console.log('Audio unlock failed:',e)}}function playSound(freq){if(!audioUnlocked||!audioContext)return;try{var oscillator=audioContext.createOscillator();var gainNode=audioContext.createGain();oscillator.type='square';oscillator.frequency.value=freq;gainNode.gain.value=0.1;oscillator.connect(gainNode);gainNode.connect(audioContext.destination);oscillator.start();oscillator.stop(audioContext.currentTime+CONFIG.audio.duration)}catch(e){console.log('Sound play failed:',e)}}function playHaptic(pattern){if(navigator.vibrate){navigator.vibrate(pattern)}}function initGame(){snake=[{x:10,y:10},{x:9,y:10},{x:8,y:10}];direction='RIGHT';nextDirection='RIGHT';gameSpeed=CONFIG.grid.baseSpeed;collectedFragments=[];isPaused=false;isGameOver=false;remainingClips=CONFIG.clips.slice();for(var i=remainingClips.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=remainingClips[i];remainingClips[i]=remainingClips[j];remainingClips[j]=temp}spawnFood();updateUI();clearVideoOverlay();renderFragmentList()}function startGame(){if(gameLoop)clearInterval(gameLoop);gameLoop=setInterval(update,gameSpeed)}function stopGame(){if(gameLoop){clearInterval(gameLoop);gameLoop=null}}function update(){if(isPaused||isGameOver)return;direction=nextDirection;var head={x:snake[0].x,y:snake[0].y};if(direction==='UP')head.y--;else if(direction==='DOWN')head.y++;else if(direction==='LEFT')head.x--;else if(direction==='RIGHT')head.x++;if(head.x<0||head.x>=tileCount||head.y<0||head.y>=tileCount){gameOver();return}for(var i=0;i<snake.length;i++){if(head.x===snake[i].x&&head.y===snake[i].y){gameOver();return}}snake.unshift(head);if(head.x===food.x&&head.y===food.y){collectFood()}else{snake.pop()}render();updateVideoPositions()}function collectFood(){playSound(CONFIG.audio.frequencies.collect);playHaptic(CONFIG.audio.haptic.collect);var fragment=currentFood;fragment.order=collectedFragments.length;collectedFragments.push(fragment);var tailIndex=snake.length-1;snake[tailIndex].fragment=fragment;createVideoIframe(fragment,tailIndex);if(remainingClips.length>0){spawnFood()}else{food=null;currentFood=null}if(collectedFragments.length%CONFIG.grid.speedIncrementInterval===0){gameSpeed=Math.max(CONFIG.grid.minSpeed,gameSpeed-CONFIG.grid.speedIncrement);stopGame();startGame()}updateUI();renderFragmentList()}function spawnFood(){if(remainingClips.length===0)return;var attempts=0;var maxAttempts=100;while(attempts<maxAttempts){var x=Math.floor(Math.random()*tileCount);var y=Math.floor(Math.random()*tileCount);var collision=false;for(var i=0;i<snake.length;i++){if(snake[i].x===x&&snake[i].y===y){collision=true;break}}if(!collision){food={x:x,y:y};currentFood=remainingClips.shift();return}attempts++}}function createVideoIframe(fragment,segmentIndex){var iframe=document.createElement('iframe');iframe.src='https://www.youtube.com/embed/'+CONFIG.youtube.videoId+'?start='+fragment.start+'&end='+fragment.end+'&'+CONFIG.youtube.embedParams;iframe.allow='autoplay; encrypted-media';iframe.style.position='absolute';iframe.style.opacity='0.7';iframe.style.mixBlendMode='screen';iframe.style.pointerEvents='none';iframe.style.border='none';iframe.setAttribute('data-segment',segmentIndex);iframe.setAttribute('data-fragment-id',fragment.id);videoOverlay.appendChild(iframe);if(!snake[segmentIndex].iframe){snake[segmentIndex].iframe=iframe}}function updateVideoPositions(){var containerRect=canvas.getBoundingClientRect();var scale=containerRect.width/canvas.width;for(var i=0;i<snake.length;i++){if(snake[i].iframe){var x=snake[i].x*tileSize*scale;var y=snake[i].y*tileSize*scale;var size=tileSize*scale;snake[i].iframe.style.left=x+'px';snake[i].iframe.style.top=y+'px';snake[i].iframe.style.width=size+'px';snake[i].iframe.style.height=size+'px'}}}function clearVideoOverlay(){while(videoOverlay.firstChild){videoOverlay.removeChild(videoOverlay.firstChild)}for(var i=0;i<snake.length;i++){delete snake[i].iframe;delete snake[i].fragment}}function render(){ctx.fillStyle=CONFIG.palette.bg;ctx.fillRect(0,0,canvas.width,canvas.height);if(food&&currentFood){ctx.fillStyle=CONFIG.palette.food;ctx.fillRect(food.x*tileSize,food.y*tileSize,tileSize,tileSize);ctx.fillStyle=CONFIG.palette.primary;ctx.font=(tileSize*0.8)+'px Courier New';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(currentFood.icon,(food.x+0.5)*tileSize,(food.y+0.5)*tileSize)}for(var i=0;i<snake.length;i++){var seg=snake[i];ctx.fillStyle=i===0?'#00ff55':CONFIG.palette.primary;ctx.fillRect(seg.x*tileSize,seg.y*tileSize,tileSize,tileSize);if(seg.fragment){ctx.fillStyle=CONFIG.palette.accent;ctx.font=(tileSize*0.6)+'px Courier New';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(seg.fragment.icon,(seg.x+0.5)*tileSize,(seg.y+0.5)*tileSize)}if(i===0){ctx.fillStyle='#000';var eyeSize=tileSize*0.15;var eyeOffsetX=tileSize*0.25;var eyeOffsetY=tileSize*0.3;ctx.fillRect(seg.x*tileSize+eyeOffsetX,seg.y*tileSize+eyeOffsetY,eyeSize,eyeSize);ctx.fillRect(seg.x*tileSize+tileSize-eyeOffsetX-eyeSize,seg.y*tileSize+eyeOffsetY,eyeSize,eyeSize)}}}function gameOver(){isGameOver=true;stopGame();playSound(CONFIG.audio.frequencies.death);playHaptic(CONFIG.audio.haptic.death);document.getElementById('final-score').textContent=collectedFragments.length;var beatList=document.getElementById('beat-list');beatList.innerHTML='';for(var i=0;i<collectedFragments.length;i++){var item=document.createElement('div');item.className='beat-item';item.textContent=(i+1)+'. '+collectedFragments[i].beat+' — '+collectedFragments[i].title;beatList.appendChild(item)}document.getElementById('gameover-screen').classList.add('active')}function restart(){document.getElementById('gameover-screen').classList.remove('active');document.getElementById('pause-screen').classList.remove('active');initGame();startGame()}function togglePause(){if(isGameOver)return;isPaused=!isPaused;if(isPaused){document.getElementById('pause-screen').classList.add('active')}else{document.getElementById('pause-screen').classList.remove('active')}}function queueDirection(dir){var opposite={'UP':'DOWN','DOWN':'UP','LEFT':'RIGHT','RIGHT':'LEFT'};if(opposite[direction]!==dir){nextDirection=dir;playSound(CONFIG.audio.frequencies.turn);playHaptic(CONFIG.audio.haptic.turn)}}function updateUI(){document.getElementById('score-value').textContent=collectedFragments.length;document.getElementById('fragment-count').textContent=collectedFragments.length;document.getElementById('speed-value').textContent=gameSpeed}function renderFragmentList(){fragmentList.innerHTML='';for(var i=0;i<collectedFragments.length;i++){var frag=collectedFragments[i];var card=document.createElement('div');card.className='fragment-card';card.onclick=(function(f){return function(){openPreview(f)}})(frag);card.innerHTML='<div class="fragment-icon">'+frag.icon+'</div><div class="fragment-title">'+frag.title+'</div><div class="fragment-meta">'+frag.tag+' | '+frag.beat+'</div><div class="fragment-time">'+frag.start+'s - '+frag.end+'s</div>';fragmentList.appendChild(card)}}function openPreview(fragment){var modal=document.getElementById('preview-modal');var container=document.getElementById('modal-video-container');var info=document.getElementById('modal-info');var title=document.getElementById('modal-title');title.textContent=fragment.title;container.innerHTML='<iframe src="https://www.youtube.com/embed/'+CONFIG.youtube.videoId+'?start='+fragment.start+'&end='+fragment.end+'&'+CONFIG.youtube.embedParams+'&controls=1" allow="autoplay; encrypted-media" frameborder="0" allowfullscreen></iframe>';info.innerHTML='<div><strong>Icon:</strong> '+fragment.icon+'</div><div><strong>Tag:</strong> '+fragment.tag+'</div><div><strong>Beat:</strong> '+fragment.beat+'</div><div><strong>Time:</strong> '+fragment.start+'s - '+fragment.end+'s</div><div><strong>Description:</strong> '+fragment.description+'</div>';modal.classList.add('active')}function closePreview(){var modal=document.getElementById('preview-modal');modal.classList.remove('active');document.getElementById('modal-video-container').innerHTML=''}function exportTimeline(){var titleInput=document.getElementById('export-title-input').value;var autoTitle=generateAutoTitle();var finalTitle=titleInput||autoTitle;var otiJson={version:"1.0",title:finalTitle,source:{youtube_id:CONFIG.youtube.videoId,platform:"YouTube"},fragments:[],metadata:{collection_order:[],score:collectedFragments.length,timestamp:new Date().toISOString()}};for(var i=0;i<collectedFragments.length;i++){var frag=collectedFragments[i];otiJson.fragments.push({id:frag.id,start:frag.start,end:frag.end,icon:frag.icon,tag:frag.tag,beat:frag.beat,title:frag.title,description:frag.description});otiJson.metadata.collection_order.push(frag.id)}var storymap='# '+finalTitle+'\n\n## Source\nYouTube ID: '+CONFIG.youtube.videoId+'\n\n## Timeline ('+collectedFragments.length+' fragments collected)\n\n';for(var i=0;i<collectedFragments.length;i++){var frag=collectedFragments[i];storymap+='### '+frag.beat+' — '+frag.title+'\n';storymap+='**Icon**: '+frag.icon+'  \n';storymap+='**Tag**: '+frag.tag+'  \n';storymap+='**Time**: '+frag.start+'s - '+frag.end+'s  \n';storymap+='**Description**: '+frag.description+'\n\n---\n\n'}var combined='=== OTI JSON ===\n\n'+JSON.stringify(otiJson,null,2)+'\n\n=== STORYMAP MARKDOWN ===\n\n'+storymap;var blob=new Blob([combined],{type:'text/plain'});var url=URL.createObjectURL(blob);var a=document.createElement('a');a.href=url;a.download='timeline-snake-export-'+Date.now()+'.txt';document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url)}function generateAutoTitle(){var words=[];for(var i=0;i<collectedFragments.length;i++){var title=collectedFragments[i].title;var titleWords=title.split(' ');for(var j=0;j<titleWords.length;j++){var word=titleWords[j].replace(/[^a-zA-Z]/g,'');if(word.length>4&&words.indexOf(word)===-1){words.push(word)}}}if(words.length>=2){return words[0]+' '+words[1]+': A Documentary'}else if(words.length===1){return words[0]+': A Documentary'}else{return'Filter Bubbles: A Documentary'}}document.addEventListener('keydown',function(e){if(isGameOver){if(e.key==='r'||e.key==='R'||e.key==='Enter'){restart()}return}if(e.key===' '||e.key==='p'||e.key==='P'){e.preventDefault();togglePause();return}if(isPaused)return;if(e.key==='ArrowUp'||e.key==='w'||e.key==='W'){e.preventDefault();queueDirection('UP')}else if(e.key==='ArrowDown'||e.key==='s'||e.key==='S'){e.preventDefault();queueDirection('DOWN')}else if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A'){e.preventDefault();queueDirection('LEFT')}else if(e.key==='ArrowRight'||e.key==='d'||e.key==='D'){e.preventDefault();queueDirection('RIGHT')}});canvas.addEventListener('touchstart',function(e){unlockAudio();touchStartX=e.touches[0].clientX;touchStartY=e.touches[0].clientY},false);canvas.addEventListener('touchmove',function(e){e.preventDefault()},false);canvas.addEventListener('touchend',function(e){if(isPaused||isGameOver)return;var touchEndX=e.changedTouches[0].clientX;var touchEndY=e.changedTouches[0].clientY;var dx=touchEndX-touchStartX;var dy=touchEndY-touchStartY;if(Math.abs(dx)>40||Math.abs(dy)>40){if(Math.abs(dx)>Math.abs(dy)){queueDirection(dx>0?'RIGHT':'LEFT')}else{queueDirection(dy>0?'DOWN':'UP')}}},false);document.getElementById('start-btn').addEventListener('click',function(){unlockAudio();document.getElementById('start-overlay').classList.add('hidden');initGame();startGame()});window.addEventListener('resize',function(){updateVideoPositions()});
</script></body></html>
